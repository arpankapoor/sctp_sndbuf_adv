\chapter{Implementation}

\section{Linux Kernel Modification}
\begin{itemize}
  \item A patch implementing the SCTP send buffer advertisement was created for
    Linux kernel \texttt{v4.6-rc4}.
  \item The send buffer advertisement chunk type value was set to 150.
  \item To modify the frequency at which send buffer advertisement chunks are
    sent, a \texttt{sysctl} interface was created. The default value was set to
    5 seconds.
  \item A kernel timer was added corresponding to each SCTP association
    (within the \texttt{struct sctp\_association}).
  \item A state table was created for this chunk, specifying the states in which
    the send buffer advertisement chunk should be generated and sent.
\end{itemize}

\section{Test bed Implementation Details}
Two Raspberry Pis were configured as routers and laptops were used as end hosts
to achieve the dumbbell shaped topology.

\begin{figure}[h]
  \centering
  \small
  \begin{tikzpicture}[start chain=testbed going right]

    \node [on chain] {\vdots};

    \node [start branch=1 going above, on chain,
    label=below:PC\textsubscript{\(1\)},
    label=right:\texttt{\scriptsize 192.168.150.2}] (pc1)
    {\includegraphics{imgs/pc.eps}};

    \node [start branch=2 going below, on chain,
    label=below:PC\textsubscript{\(x\)},
    label=right:\texttt{\scriptsize 192.168.150.x}] (pcn)
    {\includegraphics{imgs/pc.eps}};

    \node [on chain, join=with pc1, join=with pcn,
    label=below:Switch\textsubscript{\(1\)}]
    {\includegraphics{imgs/switch.eps}};

    \node [on chain, join,
    label=below:RPi\textsubscript{\(1\)}] (rpi1)
    {\includegraphics{imgs/router.eps}};

    \node [on chain, join,
    label=below:RPi\textsubscript{\(2\)}] (rpi2)
    {\includegraphics{imgs/router.eps}};

    \draw[-] (4.25, 0) -- (4.25, 0.5)
    node[above] {\scriptsize \texttt{192.168.150.1}};

    \draw[-] (8.45, 0) -- (8.45, 0.5)
    node[above] {\scriptsize \texttt{192.168.50.1}};

    \draw[-] (5.8, 0) -- (5.8, 1.5)
    node[above] {\scriptsize \texttt{192.168.100.2}};

    \draw[-] (6.85, 0) -- (6.85, -1.5)
    node[below] {\scriptsize \texttt{192.168.100.3}};

    \node [on chain, join,
    label=below:Switch\textsubscript{\(2\)}] (switch2)
    {\includegraphics{imgs/switch.eps}};

    \node [on chain] {\vdots};

    \node [start branch=3 going above, on chain, join=with switch2,
    label=below:PC\textsubscript{\(x+1\)},
    label=left:\texttt{\scriptsize 192.168.50.2}]
    {\includegraphics{imgs/pc.eps}};

    \node [start branch=4 going below, on chain, join=with switch2,
    label=below:PC\textsubscript{\(y\)},
    label=left:\texttt{\scriptsize 192.168.50.y}]
    {\includegraphics{imgs/pc.eps}};

  \end{tikzpicture}
  \caption{Test bed implementation}
\end{figure}
